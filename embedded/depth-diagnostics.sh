#!/bin/sh

list_dir()
{
	echo "========================================================================"
	echo $1
	echo "========================================================================"
	echo
	ls -l "$1"

	find "$1" -maxdepth 1 -type f -printf "\n----------------\n%f\n----------------\n" -exec cat {} \;

	echo
}

cat <<EOF
=====================================
 Depth Camera Controller Diagnostics
=====================================

EOF

cat <<EOF
=====================================
             Disk Usage
=====================================
EOF
df
echo

cat <<EOF
=====================================
             Disk Health
=====================================
EOF
ubinfo -a
echo


list_dir /etc/knc
list_dir /var/lib/knd
list_dir /var/lib/knc

cat <<EOF
========================================================================
USB Devices
========================================================================
EOF
lsusb

echo ------------------------------------------------------------------------
lsusb -t
